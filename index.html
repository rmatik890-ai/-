<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ùó¶'ùó¶ ùóüùóòùóöùóòùó°ùóó ùóßùóòùóîùó†</title>
    <style>
        /* ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            overflow: hidden;
            background-color: #000;
        }

        /* ‡ßß. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶æ‡¶á‡¶ü (iframe) */
        #bg-site {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
        }

        /* ‡ß®. ‡¶≠‡¶æ‡¶∏‡¶Æ‡¶æ‡¶® ‡¶™‡¶™-‡¶Ü‡¶™ (Draggable Modal) */
        #floating-panel {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, 0); 
            width: 260px;
            background: rgba(20, 20, 30, 0.98);
            border-radius: 15px;
            border: 2px solid #d600ff; 
            box-shadow: 0 0 10px #d600ff, 0 0 20px #00ffff;
            z-index: 9999;
            padding: 15px;
            text-align: center;
            color: white;
            cursor: move;
            user-select: none;
            touch-action: none; 
            transition: width 0.5s ease;
        }

        /* --- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞ "Mini Mode" --- */
        #floating-panel.compact-mode {
            width: 220px; /* ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ö‡¶ì‡ßú‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã */
            padding: 10px;
            max-height: 80vh; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶®‡¶æ ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
            overflow-y: auto; /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶≤‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá */
        }
        
        /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶æ‡¶∞ ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶æ (‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) */
        #floating-panel.compact-mode::-webkit-scrollbar {
            width: 0px;
        }

        /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ */
        .header-title {
            font-size: 14px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 10px;
            text-shadow: 0 0 5px #00ffff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® --- */
        #login-section {
            display: block;
        }

        input[type="password"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #00ffff;
            background: #111;
            color: white;
            outline: none;
            text-align: center;
            font-size: 12px;
        }

        .btn-login {
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(90deg, #00ffff, #00ffaa);
            color: #000;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 8px #00ffff;
            font-size: 12px;
        }

        /* --- ‡¶Æ‡¶° ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶≤‡¶ó‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡¶∞) --- */
        #mod-dashboard {
            display: none; 
        }

        /* ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶∞‡¶ø‡ßü‡¶æ */
        .profile-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 8px;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }
        
        .profile-img {
            width: 40px; 
            height: 40px;
            border-radius: 50%;
            background-color: #333;
            border: 2px solid #fff;
            margin-bottom: 2px;
            object-fit: cover;
        }

        .user-name {
            font-size: 10px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 2px;
        }

        /* ‡¶™‡¶ø‡¶∞‡¶ø‡ßü‡¶° ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ */
        .info-box {
            background: #111;
            border-radius: 5px;
            padding: 5px;
            margin-bottom: 8px;
            border: 1px solid #333;
        }
        .period-text { font-size: 11px; color: #ff0055; font-weight: bold; }
        .time-text { font-size: 10px; color: #aaa; }

        /* ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü */
        .prediction-container {
            margin: 5px 0 10px 0;
        }
        .result-box {
            font-size: 26px; 
            font-weight: 900;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
            margin-top: 2px;
            animation: popUp 0.5s ease-out;
        }
        .confidence-text {
            font-size: 10px;
            color: #ccc;
        }

        @keyframes popUp {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ */
        .history-container {
            max-height: 120px;
            overflow-y: auto;
            margin-bottom: 10px;
            border: 1px solid #333;
            border-radius: 5px;
            font-size: 9px;
        }
        table { width: 100%; border-collapse: collapse; }
        th { background: #00ffff; color: #000; padding: 2px; position: sticky; top: 0; }
        td { border-bottom: 1px solid #333; padding: 3px; color: #fff; }
        
        /* ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶°‡¶ü */
        .dot {
            height: 8px; width: 8px;
            border-radius: 50%;
            display: inline-block;
        }
        .green { background-color: #00e600; color: #00e600; }
        .red { background-color: #ff3333; color: #ff3333; }
        .violet { background-color: #bf00ff; color: #bf00ff; }
        
        /* ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶ü‡¶® */
        .telegram-btn {
            display: inline-block;
            text-decoration: none;
            background: #0088cc;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 11px;
            box-shadow: 0 0 8px #0088cc;
        }

    </style>
</head>
<body>

    <!-- ‡ßß. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡¶æ‡¶á‡¶ü -->
    <iframe id="bg-site" src="https://amarclub.net/#/register?invitationCode=386781246504"></iframe>


    <!-- ‡ß®. ‡¶≠‡¶æ‡¶∏‡¶Æ‡¶æ‡¶® ‡¶™‡¶™-‡¶Ü‡¶™ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ -->
    <div id="floating-panel">
        <div class="header-title">ùó¶'ùó¶ ùóüùóòùóöùóòùó°ùóó ùóßùóòùóîùó†</div>

        <!-- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶´‡¶∞‡ßç‡¶Æ -->
        <div id="login-section">
            <input type="password" id="passwordInput" placeholder="Password">
            <button class="btn-login" onclick="checkLogin()">Login</button>
            <p id="error-msg" style="color:red; font-size:10px; margin-top:5px; display:none;">Wrong Password!</p>
        </div>

        <!-- ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶≤‡¶ó‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶Ü‡¶∏‡¶¨‡ßá) -->
        <div id="mod-dashboard">
            <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ -->
            <div class="profile-area">
                <img src="https://ik.imagekit.io/ljcih9oti/IMG        _20251130_173135_526.jpg" alt="Profile" class="profile-img">
                <div class="user-name">ùó¶'ùó¶ ùóüùóòùóöùóòùó°ùóó ùóßùóòùóîùó†</div>
            </div>

            <!-- ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶®‡¶´‡ßã -->
            <div class="info-box">
                <div id="currentPeriod" class="period-text">Period: Loading...</div>
                <div id="liveTime" class="time-text">Time: --:--:--</div>
            </div>

            <!-- ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü -->
            <div class="prediction-container">
                <div class="confidence-text">PREDICTION</div>
                <div id="predictionBox" class="result-box">WAIT...</div>
                <div id="confidenceBox" class="confidence-text">Confidence: --%</div>
            </div>

            <!-- ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ -->
            <div class="history-container">
                <table>
                    <thead>
                        <tr>
                            <th>Period</th>
                            <th>Num</th>
                            <th>B/S</th>
                            <th>Col</th>
                        </tr>
                    </thead>
                    <tbody id="resultBody">
                        <tr><td colspan="4">Loading...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶ü‡¶® -->
            <a href="https://t.me/ss_legend_team" target="_blank" class="telegram-btn">Join TG</a>
        </div>
    </div>

    <script>
        // --- ‡ßß. ‡¶°‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï (Source A ‡¶•‡ßá‡¶ï‡ßá) ---
        const floatingPanel = document.getElementById("floating-panel");
        let isDragging = false;
        let offsetX, offsetY;

        floatingPanel.addEventListener("mousedown", (e) => {
            isDragging = true;
            offsetX = e.clientX - floatingPanel.getBoundingClientRect().left;
            offsetY = e.clientY - floatingPanel.getBoundingClientRect().top;
            floatingPanel.style.cursor = "grabbing";
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                let x = e.clientX - offsetX;
                let y = e.clientY - offsetY;
                floatingPanel.style.left = `${x}px`;
                floatingPanel.style.top = `${y}px`;
                floatingPanel.style.transform = "none";
            }
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
            floatingPanel.style.cursor = "move";
        });

        // Touch Support
        floatingPanel.addEventListener("touchstart", (e) => {
            isDragging = true;
            const touch = e.touches[0];
            offsetX = touch.clientX - floatingPanel.getBoundingClientRect().left;
            offsetY = touch.clientY - floatingPanel.getBoundingClientRect().top;
        }, { passive: false });

        document.addEventListener("touchmove", (e) => {
            if (isDragging) {
                const touch = e.touches[0];
                let x = touch.clientX - offsetX;
                let y = touch.clientY - offsetY;
                if(x < 0) x = 0;
                if(y < 0) y = 0;
                if(x + floatingPanel.offsetWidth > window.innerWidth) x = window.innerWidth - floatingPanel.offsetWidth;
                if(y + floatingPanel.offsetHeight > window.innerHeight) y = window.innerHeight - floatingPanel.offsetHeight;
                floatingPanel.style.left = `${x}px`;
                floatingPanel.style.top = `${y}px`;
                floatingPanel.style.transform = "none";
                e.preventDefault(); 
            }
        }, { passive: false });
        document.addEventListener("touchend", () => { isDragging = false; });


        // --- ‡ß®. ‡¶≤‡¶ó‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç API ‡¶≤‡¶ú‡¶ø‡¶ï ---
        
        const CORRECT_PASSWORD = "WIFE-HABIBA"; 
        let intervalId; // ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

        function checkLogin() {
            const inputPass = document.getElementById("passwordInput").value;
            const errorMsg = document.getElementById("error-msg");

            if (inputPass === CORRECT_PASSWORD) {
                // UI ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
                document.getElementById("login-section").style.display = "none";
                document.getElementById("mod-dashboard").style.display = "block";
                document.getElementById("floating-panel").classList.add("compact-mode");
                
                // API ‡¶ï‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ
                loadAndPredict();
                updateLiveTime();
                intervalId = setInterval(() => {
                    loadAndPredict();
                    updateLiveTime();
                }, 5000); 

            } else {
                errorMsg.style.display = "block";
                document.getElementById("passwordInput").style.border = "1px solid red";
            }
        }

        // --- ‡ß©. API ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï (Source B ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶ü‡ßá‡¶°) ---

        const CURRENT_API = 'https://api.bdg88zf.com/api/webapi/GetGameIssue';
        const HISTORY_API = 'https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json';
        const REQUEST_DATA = {
            typeId: 1, language: 0, random: "e7fe6c090da2495ab8290dac551ef1ed",
            signature: "1F390E2B2D8A55D693E57FD905AE73A7", timestamp: 1723726679
        };

        function getBigSmall(num) { return num >= 5 ? 'Big' : 'Small'; }
        
        function getColorType(num) {
            if ([1,3,7,9].includes(num)) return 'Green';
            if ([2,4,6,8].includes(num)) return 'Red';
            return 'Violet';
        }

        function getPrediction(history) {
            const sizeList = history.map(h => getBigSmall(parseInt(h.number)));
            const bigCount = sizeList.filter(s => s === 'Big').length;
            const smallCount = sizeList.length - bigCount;
            let streakSize = sizeList[0];
            let streakCount = 1;
            
            for (let i = 1; i < sizeList.length; i++) {
                if (sizeList[i] === streakSize) streakCount++;
                else break;
            }

            let predicted = '';
            // Pattern Matching
            const recentPattern = sizeList.slice(0, 3).join(',');
            for (let i = 3; i < sizeList.length - 3; i++) {
                const pattern = sizeList.slice(i, i + 3).join(',');
                if (pattern === recentPattern) {
                    predicted = sizeList[i + 3];
                    break;
                }
            }

            if (!predicted) {
                if (bigCount > smallCount + 2) predicted = 'Small';
                else if (smallCount > bigCount + 2) predicted = 'Big';
                else predicted = sizeList[0] === 'Big' ? 'Small' : 'Big';
            }

            if (streakCount >= 3) {
                predicted = streakSize === 'Big' ? 'Small' : 'Big';
            }
            return predicted;
        }

        function generateConfidence() {
            return Math.floor(Math.random() * 20) + 80; // 80-99%
        }

        async function loadCurrentPeriod() {
            try {
                const res = await fetch(CURRENT_API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(REQUEST_DATA)
                });
                const data = await res.json();
                return data.data?.issueNumber || "Unavailable";
            } catch {
                return "Unavailable";
            }
        }

        async function loadAndPredict() {
            // ‡ßß. ‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶ø‡¶∞‡¶ø‡ßü‡¶° ‡¶≤‡ßã‡¶°
            const currentPeriod = await loadCurrentPeriod();
            document.getElementById('currentPeriod').innerText = "Period: " + currentPeriod;

            // ‡ß®. ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶≤‡ßã‡¶°
            try {
                const res = await fetch(HISTORY_API + '?ts=' + Date.now());
                const data = await res.json();
                const list = data.data.list.slice(0, 20); // ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ß®‡ß¶‡¶ü‡¶æ ‡¶°‡ßá‡¶ü‡¶æ

                // ‡ß©. ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                const tbody = document.getElementById('resultBody');
                tbody.innerHTML = '';
                list.forEach(item => {
                    const num = parseInt(item.number);
                    const size = getBigSmall(num);
                    const colorClass = getColorType(num).toLowerCase();
                    
                    // ‡¶™‡¶ø‡¶∞‡¶ø‡ßü‡¶° ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶¨‡¶æ‡¶Å‡¶ö‡¶æ‡¶§‡ßá
                    const shortPeriod = item.issueNumber.slice(-4); 

                    tbody.innerHTML += `
                    <tr>
                        <td>${shortPeriod}</td>
                        <td style="color:${colorClass === 'green' ? '#0f0' : colorClass === 'red' ? '#f00' : '#bf00ff'}">${num}</td>
                        <td>${size}</td>
                        <td><span class="dot ${colorClass}"></span></td>
                    </tr>`;
                });

                // ‡ß™. ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü
                const lastPeriod = localStorage.getItem("lastShownPeriod");
                
                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶ø‡¶∞‡¶ø‡ßü‡¶° ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶¨‡ßá
                if (currentPeriod !== lastPeriod) {
                    const prediction = getPrediction(list);
                    const confidence = generateConfidence();
                    
                    const pBox = document.getElementById("predictionBox");
                    pBox.innerText = prediction.toUpperCase();
                    
                    // ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ö‡ßá‡¶û‡ßç‡¶ú
                    if(prediction === 'Big') {
                        pBox.style.color = "#00ff00"; // Green for Big (Example)
                    } else {
                        pBox.style.color = "#ffaa00"; // Orange for Small
                    }
                    
                    // ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
                    pBox.classList.remove("animate-pop");
                    void pBox.offsetWidth;
                    pBox.classList.add("animate-pop");

                    document.getElementById("confidenceBox").innerText = `Confidence: ${confidence}%`;

                    localStorage.setItem("lastPrediction", prediction);
                    localStorage.setItem("lastShownPeriod", currentPeriod);
                }

            } catch (err) {
                console.error("API Error", err);
            }
        }

        function updateLiveTime() {
            const now = new Date();
            const time = now.toLocaleTimeString('en-GB', { hour12: false });
            document.getElementById('liveTime').innerText = "Time: " + time;
        }

    </script>
</body>
</html>
